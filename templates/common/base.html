{% load search_tags %}
{% load get_subscribe_form %}
{% load get_cart_length %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Усмивки със Стела</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" type="image/x-icon" href="{% static 'images/logo.png' %}">
    
    <script src="{% static 'scripts/contact-copy.js' %}"></script>
    <script src="{% static 'scripts/product-details.js' %}"></script>
    <script src="{% static 'scripts/script.js' %}"></script>
    <script src="{% static 'scripts/search_bar.js' %}"></script>
    <script src="{% static 'scripts/called-js.js' %}"></script>
    <script src="{% static 'scripts/burger.js' %}"></script>
    <script src="{% static 'scripts/add_approve.js' %}"></script>

</head>

<style>
    .img-div img {
        width: 600px;
        height: 300px;
        border-radius: 8px;
        object-fit: contain;
        text-align: center;
    }
    
    .img-div {
        width: 100%;
    }
    
    .search-bar {
    display: none;
    position: absolute;
    top: 80px;
    right: 100px;
    background-color: white;
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .search-bar input {
        padding: 5px;
        width: 200px;
        border: 1px solid #ccc;
        border-radius: 3px;
    }
    
    .search-bar button {
        padding: 5px 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
    }
    
    .search-bar form {
        display: flex;
        gap: 1em;
    }
    
    .a-footer {
        color: black;
    }
    
    .a-footer:hover {
        cursor: pointer;
    }
</style>

<body>
    <header>
        <nav>
            <a href="{% url 'index' %}" class="logo-href">
                <img src="{%  static  'images/logo.png' %}" alt="">
            </a>
            
            <section class="nav-things">
                <ul>
                    <li><a href="{% url 'all-products' %}">Всички продукти</a></li>
                    <li><a href="{% url 'soaps' %}">Сапуни</a></li>
                    <li><a href="{% url 'decorations' %}">Украси</a></li>
                    <li><a href="{% url 'gift-sets' %}">Подаръчни комплекти</a></li>
                    <li><a href="{% url 'about-us' %}">За нас</a></li>
                    <li><a href="{% url 'contact' %}">Контакти</a></li>
                </ul>
            </section>
        
            {% get_search_form as search_form %}
            
            <section class="registration">
                <ul>
                    <section class="search-bar" id="search-bar">
                        <form method="get">
                            {{ search_form }}
                            <button type="submit">Търси</button>
                            </form>
                    </section>

                {% get_cart_length as cart_length  %}

                    <a href="javascript:void(0);" id="search-icon"><i class="fa-solid fa-magnifying-glass"></i></a>

                    {% if not request.user.is_authenticated %}
                        <span class="cart-length">{{ cart_length }}</span>
                    {% else %}
                        <span class="cart-length-auth">{{ cart_length }}</span>

                    {% endif %}
                    {% if request.user.is_authenticated %}
                        <a href="{% url 'cart' request.user.id %}"><i class="fa-solid fa-cart-shopping"></i></a>
                    {% else %}
                        <a href="{% url 'login-by-me'%}"><i class="fa-solid fa-cart-shopping"></i></a>
                        
                    {% endif %}
                    
                    {% if not request.user.is_authenticated %}
                    <li>
                        <a href="{% url 'login-by-me' %}" class="hover-arrows">
                            <span class="arrow left">←</span>
                            ВХОД
                            <span class="arrow right">→</span>
                        </a>
                    </li>
                    <li class="signup"><a href="{% url 'register-by-me' %}">РЕГИСТРАЦИЯ</a></li>
                    
                    {% else %}
                        <li>
                            <a href="{% url 'logout-by-me' %}" class="hover-arrows">
                                <span class="arrow left">←</span>
                                ИЗХОД
                                <span class="arrow right">→</span>
                            </a>
                        </li>
                        <li class="signup"><a href="{% url 'profile-details' request.user.pk %}">ПРОФИЛ</a></li>
                    {% endif %}
                </ul>
            </section>
        </nav>

    <div class="hamburger-line">
            <input type="checkbox" id="navi-toggle" class="checkbox" />
          <label for="navi-toggle" class="button">
            <span class="icon-icons">&nbsp;</span>
          </label>
          <div class="background">&nbsp;</div>

          <nav class="nav">
            <ul class="list">
              <li class="item-items"> <a href="{% url 'index' %}" class="logo-href link"><img class="img-logo" src="{%  static  'images/logo.png' %}" alt=""></a>  </li>  
              <li class="item-items"> <a class="link" href="{% url 'all-products' %}"> Всички продукти</a> </li>
              <li class="item-items"> <a class="link" href="{% url 'soaps' %}"> Сапуни </a> </li>
              <li class="item-items"> <a class="link" href="{% url 'gift-sets' %}"> Подаръчни комплекти </a> </li>
              <li class="item-items"> <a class="link" href="{% url 'about-us' %}"> За нас </a> </li>
              <li class="item-items"> <a class="link" href="{% url 'contact' %}"> Контакти </a> </li>
              <li class="item-items">
                  <section class="registration">
                <ul>
                    <section class="search-bar" id="search-bar">
                        <form method="get">
                            {{ search_form }}
                            <button type="submit">Search</button>
                            </form>
                    </section>

                {% get_cart_length as cart_length  %}

                    <a href="javascript:void(0);" id="search-icon"><i class="fa-solid fa-magnifying-glass"></i></a>

                    {% if not request.user.is_authenticated %}
                        <span class="cart-length">{{ cart_length }}</span>
                    {% else %}
                        <span class="cart-length-auth">{{ cart_length }}</span>

                    {% endif %}
                    {% if request.user.is_authenticated %}
                        <a class="cart-icon" href="{% url 'cart' request.user.id %}"><i class="fa-solid fa-cart-shopping"></i></a>
                    {% else %}
                        <a class="cart-icon" href="{% url 'login-by-me'%}"><i class="fa-solid fa-cart-shopping"></i></a>
                        
                    {% endif %}
                </ul>
            </section>
              </li>
            <li class="item-items">
                {% if not request.user.is_authenticated %}
                    <li>
                        <a href="{% url 'login-by-me' %}" class="hover-arrows">
                            <span class="arrow left">←</span>
                            ВХОД
                            <span class="arrow right">→</span>
                        </a>
                    </li>
                    <li class="signup"><a href="{% url 'register-by-me' %}">РЕГИСТРАЦИЯ</a></li>
                    
                    {% else %}
                        <li>
                            <a href="{% url 'logout-by-me' %}" class="hover-arrows">
                                <span class="arrow left">←</span>
                                ИЗХОД
                                <span class="arrow right">→</span>
                            </a>
                        </li>
                        <li class="signup"><a href="{% url 'profile-details' request.user.pk %}">ПРОФИЛ</a></li>
                    {% endif %}
            </li>
            </ul>
          </nav>
    </div>
    </header>
    
{% block content %}
    
{% endblock %}
    

<footer>
        <div>
            <h4 class="needed-links">ПОЛЕЗНИ ЛИНКОВЕ</h4>
            
            <ul class="footer-ul">
                <li><a href="{% url 'all-products' %}">Всички продукти</a></li>
                <li><a href="{% url 'soaps' %}">Сапуни</a></li>
                <li><a href="{% url 'gift-sets' %}">Подаръчни комплекти</a></li>
                <li><a href="{% url 'about-us' %}">За нас</a></li>
                <li><a href="{% url 'contact' %}">Контакти</a></li>
            </ul>
        </div>
        
        {% get_subscribe_form as sign_for_news_form %}
    
        <div>
            <h4>АБОНИРАЙ СЕ ЗА НОВИНИ</h4>
            
            <form action="{% url 'subscribe-for-news' %}" method="post" class="footer-form">
                {{ sign_for_news_form }}
                {% csrf_token %}
                <button type="submit">АБОНИРАЙ СЕ СЕГА</button>
            </form>
            
            <div class="law-wrapper">
                <p><a href="">Политика за поверителност</a></p><span class="called">|</span>
                <p><a href="">Общи условия</a></p><span class="called">|</span>
                <p><a href="">Политика за доставка и връщане</a></p>
            </div>
        </div>
        
        <div>
            <h4>КОНТАКТИ</h4>
            
            <p>+359 87 860 1157</p>
            
            <div>
                <a class="a-footer" href="https://www.instagram.com/rosko.r.i.6/"><i class="fa-brands fa-instagram"></i></a>
                <a class="a-footer" href="https://www.facebook.com/profile.php?id=61561298362688&name=STSDirectNavUserDecorator"><i class="fa-brands fa-facebook"></i></a>
                <a class="a-footer" href="https://github.com/RosenCodes20"><i class="fa-brands fa-github"></i></a>
            </div>
        </div>
        
    </footer>
</body>
</html>